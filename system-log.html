<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System Logs (Static)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        :root {
            --shadow-3d-md: 0 8px 25px -5px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.1);
            --shadow-3d-sm: 0 4px 12px -2px rgba(0, 0, 0, 0.2), 0 2px 4px -1px rgba(0, 0, 0, 0.1);
            --shadow-inset: inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }
        
        .table-card {
            background: linear-gradient(135deg, hsl(240, 8%, 7%) 0%, hsl(240, 8%, 5%) 100%);
            box-shadow: var(--shadow-3d-md);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            box-shadow: var(--shadow-3d-sm);
            transition: all 0.2s ease;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
            transform: translateY(-1px);
        }
        
        .btn-outline {
            background: transparent;
            border: 1px solid #374151;
            color: #d1d5db;
            transition: all 0.2s ease;
        }
        
        .btn-outline:hover {
            background: #374151;
            border-color: #4b5563;
        }
        
        .search-input {
            background: #1f2937;
            border: 1px solid #374151;
            box-shadow: var(--shadow-inset);
        }
        
        .search-input:focus {
            border-color: #10b981;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
        }
        
        .table-row:hover {
            background-color: rgba(55, 65, 81, 0.5);
        }
        
        .level-info { color: #0ea5e9; background-color: rgba(14, 165, 233, 0.1); }
        .level-warn { color: #f59e0b; background-color: rgba(245, 158, 11, 0.1); }
        .level-error { color: #ef4444; background-color: rgba(239, 68, 68, 0.1); }
        .level-debug { color: #8b5cf6; background-color: rgba(139, 92, 246, 0.1); }
        
        .level-badge {
            padding: 0.25rem 0.5rem;
            border-radius: 0.375rem;
            font-size: 0.75rem;
            font-weight: 600;
            min-width: 60px;
            text-align: center;
        }
        
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #1f2937;
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 0.5rem;
            box-shadow: var(--shadow-3d-md);
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }
        
        .toast.show {
            transform: translateX(0);
        }
        
        .toast.success { border-left: 4px solid #10b981; }
        .toast.info { border-left: 4px solid #0ea5e9; }

        .page { display: none; }
        .page.active { display: table-row-group; }
        .filter-hidden { display: none; }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <div class="flex items-center justify-between mb-6">
            <h1 class="text-3xl font-bold bg-gradient-to-r from-white to-gray-400 bg-clip-text text-transparent">
                System Logs (Static)
            </h1>
            <div class="flex gap-3">
                <button id="refreshBtn" class="btn-primary px-4 py-2 rounded-lg font-medium flex items-center gap-2">
                    <i data-lucide="refresh-cw" class="h-4 w-4"></i>
                    Refresh
                </button>
                <button id="exportCsvBtn" class="btn-outline px-4 py-2 rounded-lg font-medium">
                    Export CSV
                </button>
            </div>
        </div>

        <!-- Filter & Search (Swapped) -->
        <div class="flex items-center justify-between gap-4 mb-6">
            <!-- Filter Section (Left) -->
            <div class="flex-1 max-w-md flex gap-3 items-center">
                <select id="filterType1" class="w-40 bg-gray-800 border border-gray-700 text-white px-3 py-2 rounded-lg focus:outline-none focus:border-emerald-500">
                    <option value="all">All Filters</option>
                    <option value="user">User</option>
                    <option value="level">Level</option>
                    <option value="date">Date</option>
                </select>

                <!-- Conditional Filter 2 -->
                <div id="filterContainer2" class="flex gap-2 items-center">
                    <!-- User Filter -->
                    <select id="filterUser" class="filter-option w-48 bg-gray-800 border border-gray-700 text-white px-3 py-2 rounded-lg hidden">
                        <option value="">All Users</option>
                        <option value="admin">admin</option>
                        <option value="user123">user123</option>
                        <option value="cron">cron</option>
                        <option value="osl_client">osl_client</option>
                        <option value="jana_client">jana_client</option>
                        <option value="dev">dev</option>
                        <option value="system">system</option>
                    </select>

                    <!-- Level Filter -->
                    <select id="filterLevel" class="filter-option w-48 bg-gray-800 border border-gray-700 text-white px-3 py-2 rounded-lg hidden">
                        <option value="">All Levels</option>
                        <option value="INFO">INFO</option>
                        <option value="WARN">WARN</option>
                        <option value="ERROR">ERROR</option>
                        <option value="DEBUG">DEBUG</option>
                    </select>

                    <!-- Date Filter -->
                    <input id="filterDate" type="date" class="filter-option w-40 bg-gray-800 border border-gray-700 text-white px-3 py-2 rounded-lg hidden" value="2025-10-30">
                    <input id="filterTimeStart" type="time" class="filter-option w-24 bg-gray-800 border border-gray-700 text-white px-2 py-2 rounded-lg hidden" value="00:00">
                    <span class="text-gray-400 hidden" id="toText">to</span>
                    <input id="filterTimeEnd" type="time" class="filter-option w-24 bg-gray-800 border border-gray-700 text-white px-2 py-2 rounded-lg hidden" value="23:59">
                </div>
            </div>

            <!-- Search (Right) -->
            <div class="flex-1 max-w-sm">
                <input 
                    type="text" 
                    id="searchInput" 
                    placeholder="Search logs..." 
                    class="search-input w-full px-3 py-2 rounded-lg text-white placeholder-gray-400 focus:outline-none"
                />
            </div>
        </div>

        <!-- Table -->
        <div class="table-card rounded-lg border border-gray-700 overflow-hidden">
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead class="bg-gray-800">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">ID</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Timestamp</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Level</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Source</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">User</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Severity</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">IP</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Duration</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Message</th>
                        </tr>
                    </thead>
                    <tbody id="logTableBody" class="divide-y divide-gray-700">

                        <!-- PAGE 1 -->
                        <tbody class="page active" data-page="1">
                            <tr class="table-row" data-user="admin" data-level="INFO" data-date="2025-10-30">
                                <td class="px-6 py-4 text-sm font-mono text-gray-300">LOG001</td>
                                <td class="px-6 py-4 text-sm font-mono text-gray-400">2025-10-30 09:15:23</td>
                                <td class="px-6 py-4 text-sm"><span class="level-badge level-info">INFO</span></td>
                                <td class="px-6 py-4 text-sm text-gray-300 font-medium">AuthService</td>
                                <td class="px-6 py-4 text-sm text-gray-400">admin</td>
                                <td class="px-6 py-4 text-sm"><span class="px-2 py-1 text-xs rounded bg-green-900 text-green-200">Low</span></td>
                                <td class="px-6 py-4 text-sm"><code class="text-xs text-gray-400">192.168.1.10</code></td>
                                <td class="px-6 py-4 text-sm text-gray-300">45ms</td>
                                <td class="px-6 py-4 text-sm text-gray-200 max-w-md truncate" title="User login successful">User login successful</td>
                            </tr>
                            <tr class="table-row" data-user="user123" data-level="WARN" data-date="2025-10-30">
                                <td class="px-6 py-4 text-sm font-mono text-gray-300">LOG002</td>
                                <td class="px-6 py-4 text-sm font-mono text-gray-400">2025-10-30 09:16:45</td>
                                <td class="px-6 py-4 text-sm"><span class="level-badge level-warn">WARN</span></td>
                                <td class="px-6 py-4 text-sm text-gray-300 font-medium">PaymentAPI</td>
                                <td class="px-6 py-4 text-sm text-gray-400">user123</td>
                                <td class="px-6 py-4 text-sm"><span class="px-2 py-1 text-xs rounded bg-yellow-900 text-yellow-200">Medium</span></td>
                                <td class="px-6 py-4 text-sm"><code class="text-xs text-gray-400">203.0.113.45</code></td>
                                <td class="px-6 py-4 text-sm text-gray-300">120ms</td>
                                <td class="px-6 py-4 text-sm text-gray-200 max-w-md truncate" title="Payment retry attempted (2/3)">Payment retry attempted (2/3)</td>
                            </tr>
                            <tr class="table-row" data-user="system" data-level="ERROR" data-date="2025-10-30">
                                <td class="px-6 py-4 text-sm font-mono text-gray-300">LOG003</td>
                                <td class="px-6 py-4 text-sm font-mono text-gray-400">2025-10-30 09:18:12</td>
                                <td class="px-6 py-4 text-sm"><span class="level-badge level-error">ERROR</span></td>
                                <td class="px-6 py-4 text-sm text-gray-300 font-medium">Database</td>
                                <td class="px-6 py-4 text-sm text-gray-400">system</td>
                                <td class="px-6 py-4 text-sm"><span class="px-2 py-1 text-xs rounded bg-red-900 text-red-200">High</span></td>
                                <td class="px-6 py-4 text-sm"><code class="text-xs text-gray-400">10.0.0.5</code></td>
                                <td class="px-6 py-4 text-sm text-gray-300">â€”</td>
                                <td class="px-6 py-4 text-sm text-gray-200 max-w-md truncate" title="Connection timeout to primary DB">Connection timeout to primary DB</td>
                            </tr>
                            <tr class="table-row" data-user="cron" data-level="INFO" data-date="2025-10-30">
                                <td class="px-6 py-4 text-sm font-mono text-gray-300">LOG004</td>
                                <td class="px-6 py-4 text-sm font-mono text-gray-400">2025-10-30 09:20:05</td>
                                <td class="px-6 py-4 text-sm"><span class="level-badge level-info">INFO</span></td>
                                <td class="px-6 py-4 text-sm text-gray-300 font-medium">BackupService</td>
                                <td class="px-6 py-4 text-sm text-gray-400">cron</td>
                                <td class="px-6 py-4 text-sm"><span class="px-2 py-1 text-xs rounded bg-green-900 text-green-200">Low</span></td>
                                <td class="px-6 py-4 text-sm"><code class="text-xs text-gray-400">127.0.0.1</code></td>
                                <td class="px-6 py-4 text-sm text-gray-300">890ms</td>
                                <td class="px-6 py-4 text-sm text-gray-200 max-w-md truncate" title="Daily backup completed successfully">Daily backup completed successfully</td>
                            </tr>
                            <tr class="table-row" data-user="user456" data-level="DEBUG" data-date="2025-10-30">
                                <td class="px-6 py-4 text-sm font-mono text-gray-300">LOG005</td>
                                <td class="px-6 py-4 text-sm font-mono text-gray-400">2025-10-30 09:22:30</td>
                                <td class="px-6 py-4 text-sm"><span class="level-badge level-debug">DEBUG</span></td>
                                <td class="px-6 py-4 text-sm text-gray-300 font-medium">API Gateway</td>
                                <td class="px-6 py-4 text-sm text-gray-400">user456</td>
                                <td class="px-6 py-4 text-sm"><span class="px-2 py-1 text-xs rounded bg-green-900 text-green-200">Low</span></td>
                                <td class="px-6 py-4 text-sm"><code class="text-xs text-gray-400">198.51.100.22</code></td>
                                <td class="px-6 py-4 text-sm text-gray-300">12ms</td>
                                <td class="px-6 py-4 text-sm text-gray-200 max-w-md truncate" title="Request routed to /v1/payments">Request routed to /v1/payments</td>
                            </tr>
                        </tbody>

                        <!-- PAGE 2 -->
                        <tbody class="page" data-page="2">
                            <tr class="table-row" data-user="osl_client" data-level="INFO" data-date="2025-10-29">
                                <td class="px-6 py-4 text-sm font-mono text-gray-300">LOG006</td>
                                <td class="px-6 py-4 text-sm font-mono text-gray-400">2025-10-29 14:30:11</td>
                                <td class="px-6 py-4 text-sm"><span class="level-badge level-info">INFO</span></td>
                                <td class="px-6 py-4 text-sm text-gray-300 font-medium">AuthService</td>
                                <td class="px-6 py-4 text-sm text-gray-400">osl_client</td>
                                <td class="px-6 py-4 text-sm"><span class="px-2 py-1 text-xs rounded bg-green-900 text-green-200">Low</span></td>
                                <td class="px-6 py-4 text-sm"><code class="text-xs text-gray-400">172.16.0.8</code></td>
                                <td class="px-6 py-4 text-sm text-gray-300">38ms</td>
                                <td class="px-6 py-4 text-sm text-gray-200 max-w-md truncate" title="OSL client authenticated">OSL client authenticated</td>
                            </tr>
                            <!-- Add more rows here for page 2, 3, etc. -->
                            <!-- Example row -->
                            <tr class="table-row" data-user="jana_client" data-level="WARN" data-date="2025-10-29">
                                <td class="px-6 py-4 text-sm font-mono text-gray-300">LOG007</td>
                                <td class="px-6 py-4 text-sm font-mono text-gray-400">2025-10-29 15:45:22</td>
                                <td class="px-6 py-4 text-sm"><span class="level-badge level-warn">WARN</span></td>
                                <td class="px-6 py-4 text-sm text-gray-300 font-medium">RateLimiter</td>
                                <td class="px-6 py-4 text-sm text-gray-400">jana_client</td>
                                <td class="px-6 py-4 text-sm"><span class="px-2 py-1 text-xs rounded bg-yellow-900 text-yellow-200">Medium</span></td>
                                <td class="px-6 py-4 text-sm"><code class="text-xs text-gray-400">203.0.113.99</code></td>
                                <td class="px-6 py-4 text-sm text-gray-300">67ms</td>
                                <td class="px-6 py-4 text-sm text-gray-200 max-w-md truncate" title="Rate limit exceeded for Jana client">Rate limit exceeded for Jana client</td>
                            </tr>
                            <!-- Repeat for 3 more rows to make 5 per page -->
                        </tbody>

                        <!-- Add more <tbody class="page" data-page="3"> etc. as needed -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Pagination -->
        <div class="flex items-center justify-between mt-6">
            <div class="text-sm text-gray-400">
                Showing <span id="showingStart">1</span> to <span id="showingEnd">5</span> of <span id="totalLogs">30</span> logs
            </div>
            <div class="flex items-center gap-2">
                <button id="prevPage" class="btn-outline px-3 py-2 rounded-lg text-sm disabled:opacity-50 disabled:cursor-not-allowed">Previous</button>
                <select id="pageSelect" class="bg-gray-800 border border-gray-700 text-white px-3 py-2 rounded-lg text-sm focus:outline-none focus:border-emerald-500">
                    <option value="1">Page 1</option>
                    <option value="2">Page 2</option>
                    <!-- Add more as needed -->
                </select>
                <button id="nextPage" class="btn-outline px-3 py-2 rounded-lg text-sm disabled:opacity-50 disabled:cursor-not-allowed">Next</button>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div id="toastContainer"></div>

    <script>
        const itemsPerPage = 5;
        let currentPage = 1;
        const totalPages = Math.ceil($('.table-row').length / itemsPerPage);

        // Initialize page select
        $('#pageSelect').empty();
        for (let i = 1; i <= totalPages; i++) {
            $('#pageSelect').append(`<option value="${i}">Page ${i}</option>`);
        }

        function updatePagination() {
            $('.page').removeClass('active').filter(`[data-page="${currentPage}"]`).addClass('active');
            $('#prevPage').prop('disabled', currentPage === 1);
            $('#nextPage').prop('disabled', currentPage === totalPages);
            $('#pageSelect').val(currentPage);
            const start = (currentPage - 1) * itemsPerPage + 1;
            const end = Math.min(currentPage * itemsPerPage, $('.table-row').length);
            $('#showingStart').text(start);
            $('#showingEnd').text(end);
            $('#totalLogs').text($('.table-row').length);
        }

        function applyFilters() {
            const search = $('#searchInput').val().toLowerCase();
            const filterType = $('#filterType1').val();
            const userVal = $('#filterUser').val();
            const levelVal = $('#filterLevel').val();
            const dateVal = $('#filterDate').val();
            const timeStart = $('#filterTimeStart').val();
            const timeEnd = $('#filterTimeEnd').val();

            $('.table-row').each(function() {
                const row = $(this);
                const text = row.text().toLowerCase();
                const matchesSearch = !search || text.includes(search);

                let matchesFilter = true;
                if (filterType === 'user' && userVal) matchesFilter = row.data('user') === userVal;
                if (filterType === 'level' && levelVal) matchesFilter = row.data('level') === levelVal;
                if (filterType === 'date' && dateVal) {
                    const rowDate = row.data('date');
                    if (rowDate !== dateVal) matchesFilter = false;
                    if (matchesFilter && timeStart && timeEnd) {
                        const rowTime = row.find('td').eq(1).text().split(' ')[1];
                        if (rowTime < timeStart || rowTime > timeEnd) matchesFilter = false;
                    }
                }

                row.toggle(matchesSearch && matchesFilter);
            });

            updatePagination();
        }

        // Filter 2 visibility
        $('#filterType1').on('change', function() {
            const val = $(this).val();
            $('.filter-option, #toText').addClass('hidden');
            if (val === 'user') $('#filterUser').removeClass('hidden');
            if (val === 'level') $('#filterLevel').removeClass('hidden');
            if (val === 'date') {
                $('#filterDate, #filterTimeStart, #toText, #filterTimeEnd').removeClass('hidden');
            }
            applyFilters();
        });

        // Event Listeners
        $('#searchInput').on('input', applyFilters);
        $('#filterUser, #filterLevel, #filterDate, #filterTimeStart, #filterTimeEnd').on('change', applyFilters);
        $('#prevPage').on('click', () => { if (currentPage > 1) { currentPage--; updatePagination(); } });
        $('#nextPage').on('click', () => { if (currentPage < totalPages) { currentPage++; updatePagination(); } });
        $('#pageSelect').on('change', function() { currentPage = parseInt($(this).val()); updatePagination(); });
        $('#refreshBtn').on('click', () => { location.reload(); });
        $('#exportCsvBtn').on('click', exportVisibleToCSV);

        function exportVisibleToCSV() {
            const rows = [['ID', 'Timestamp', 'Level', 'Source', 'User', 'Severity', 'IP', 'Duration', 'Message']];
            $('.table-row:visible').each(function() {
                const tds = $(this).find('td');
                rows.push([
                    tds.eq(0).text(),
                    tds.eq(1).text(),
                    tds.eq(2).text().trim(),
                    tds.eq(3).text(),
                    tds.eq(4).text(),
                    tds.eq(5).text(),
                    tds.eq(6).text(),
                    tds.eq(7).text(),
                    tds.eq(8).text()
                ]);
            });
            const csv = rows.map(r => r.join(',')).join('\n');
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url; a.download = 'logs-visible.csv'; a.click();
            URL.revokeObjectURL(url);
            showToast('Exported visible logs', 'success');
        }

        function showToast(msg, type = 'info') {
            const toast = $('<div class="toast show ' + type + '"><div class="flex items-center gap-2"><i data-lucide="' + (type === 'success' ? 'check-circle' : 'info') + '" class="h-5 w-5"></i><span>' + msg + '</span></div></div>');
            $('#toastContainer').append(toast);
            lucide.createIcons();
            setTimeout(() => toast.removeClass('show'), 3000);
            setTimeout(() => toast.remove(), 3500);
        }

        $(document).ready(function() {
            updatePagination();
            applyFilters();
        });
    </script>
</body>
</html>