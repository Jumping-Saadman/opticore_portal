<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>All Transactions - Demo</title>

    <style>
        @page {
            margin: 15mm;
            size: A4 landscape;
            @top-center {
                content: element(header);
                vertical-align: top;
                padding-top: 5mm;
            }
            @bottom-center {
                content: element(footer);
                vertical-align: bottom;
                padding-bottom: 5mm;
            }
        }

        @media print {
            body {
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
            }

            .content {
                margin-top: 0;
                margin-bottom: 0;
            }

            /* Ensure table headers repeat */
            thead {
                display: table-header-group;
            }
        }

        body {
            font-family: Arial, sans-serif;
            font-size: 9px;
            line-height: 1.3;
            margin: 0;
            background: white;
        }

        /* HEADER */
        .printable-header {
            position: running(header);
            text-align: center;
            padding: 10px 0;
            background: linear-gradient(to bottom, #e0f2fe, #f0f9ff);
            border-radius: 6px;
        }

        .printable-company-name {
            font-size: 18px;
            font-weight: bold;
            color: #1e3a8a;
        }

        .printable-report-title {
            font-size: 14px;
            font-weight: 600;
            color: #1d4ed8;
        }

        .printable-report-date {
            font-size: 8px;
            color: #64748b;
        }

        .count-box {
            margin-top: 15px;
            font-weight: bold;
            color: #1e3a8a;
        }

        /* TABLE */
        table {
            width: 100%;
            border-collapse: collapse;
            table-layout: fixed;
        }

        th, td {
            border: 0.5px solid #d1d5db;
            padding: 4px;
            font-size: 8px;
            word-wrap: break-word;
        }

        th {
            background: linear-gradient(to bottom, #dbeafe, #eff6ff);
            color: #1e3a8a;
            font-weight: 700;
            text-align: center;
        }

        tr:nth-child(even) { background: #f9fafb; }
        tr:hover { background: #e0f2fe; }

        .text-right { text-align: right; }
        .text-center { text-align: center; }

        /* FOOTER */
        .printable-footer {
            position: running(footer);
            text-align: center;
            font-size: 8px;
            background: linear-gradient(to top, #e0f2fe, #f0f9ff);
            padding: 8px 0;
        }

        .footer-images {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 6px;
        }

        .footer-images img {
            height: 20px;
            opacity: 0.7;
        }

        /* WATERMARK */
        .watermark {
            position: fixed;
            top: 50%;
            left: 50%;
            width: 90%;
            height: auto;
            transform: translate(-50%, -50%);
            opacity: 0.1;
            z-index: -1;
        }
    </style>
</head>

<body>

<!-- WATERMARK -->
<img class="watermark" src="https://via.placeholder.com/1200x600?text=WATERMARK" />

<!-- HEADER -->
<div class="printable-header">
    <div class="printable-company-name">Opticore Solutions Limited</div>
    <div class="printable-report-title">Transaction History</div>
    <div class="printable-report-date">Generated on: <span id="report-date"></span></div>
</div>

<div class="content">

    <div class="count-box">Total Records: <span id="record-count"></span></div>

    <table>
        <thead>
        <tr>
            <th width="4%">SL</th>
            <th width="10%">Name</th>
            <th width="16%">Email</th>
            <th width="10%">Phone</th>
            <th width="10%">Invoice</th>
            <th width="14%">Transaction ID</th>
            <th width="8%">Amount</th>
            <th width="8%">Card Type</th>
            <th width="8%">Store Amt</th>
            <th width="12%">Transaction Date</th>
            <th width="6%">Curr</th>
            <th width="8%">Issuer</th>
            <th width="8%">Brand</th>
            <th width="8%">Curr Amt</th>
            <th width="6%">Rate</th>
        </tr>
        </thead>

        <tbody id="transaction-tbody">
            <!-- Rows will be populated by JavaScript -->
        </tbody>
    </table>
</div>

<!-- FOOTER -->
<div class="printable-footer">

    <div class="footer-images">
        <img src="https://via.placeholder.com/100x40?text=Logo1">
        <img src="https://via.placeholder.com/100x40?text=Logo2">
        <img src="https://via.placeholder.com/100x40?text=Logo3">
    </div>

    <p>This is a system generated report. No signature required.</p>
    <p>Generated on <span id="footer-date"></span></p>
</div>

<script>
/* -----------------------------------------------
   GENERATE 28 RANDOM SAMPLE TRANSACTIONS (approx. 1.5 pages)
-------------------------------------------------*/
const transactions = [];

for (let i = 1; i <= 40; i++) {
    const randomHex = Math.random().toString(16).substring(2, 10).toUpperCase();
    const daysAgo = i;
    const tranDate = new Date(Date.now() - (daysAgo * 24 * 60 * 60 * 1000));
    const tranDateStr = tranDate.toLocaleDateString('en-GB') + ' ' + tranDate.toLocaleTimeString('en-GB', { hour12: false });
    
    transactions.push({
        name: `Customer ${i}`,
        email: `customer${i}@example.com`,
        phone: `01700${String(i).padStart(6, '0')}`,
        invoice: `INV-${String(i).padStart(5, '0')}`,
        transaction_id: `TXN${randomHex}`,
        amount: `${Math.floor(Math.random() * 8901) + 100}.00`,
        card_type: Math.random() > 0.5 ? 'Credit' : 'Debit',
        store_amount: `${Math.floor(Math.random() * 6921) + 80}.00`,
        tran_date: tranDateStr,
        currency: 'BDT',
        issuer: Math.random() > 0.5 ? 'Visa' : 'Mastercard',
        brand: ['DBBL', 'City Bank', 'Brac Bank'][Math.floor(Math.random() * 3)],
        curr_amount: `${Math.floor(Math.random() * 8901) + 100}.00`,
        rate: '1.00'
    });
}

// Populate the table
const tbody = document.getElementById('transaction-tbody');
const recordCount = document.getElementById('record-count');
const reportDate = document.getElementById('report-date');
const footerDate = document.getElementById('footer-date');

const now = new Date();
const nowStr = now.toLocaleDateString('en-GB') + ' ' + now.toLocaleTimeString('en-GB', { hour12: false });

recordCount.textContent = transactions.length;
reportDate.textContent = nowStr;
footerDate.textContent = nowStr;

transactions.forEach((t, index) => {
    const row = document.createElement('tr');
    row.innerHTML = `
        <td class="text-center">${index + 1}</td>
        <td>${t.name}</td>
        <td>${t.email}</td>
        <td>${t.phone}</td>
        <td class="text-center">${t.invoice}</td>
        <td class="text-center">${t.transaction_id}</td>
        <td class="text-right">${t.amount}</td>
        <td class="text-center">${t.card_type}</td>
        <td class="text-right">${t.store_amount}</td>
        <td class="text-center">${t.tran_date}</td>
        <td class="text-center">${t.currency}</td>
        <td class="text-center">${t.issuer}</td>
        <td class="text-center">${t.brand}</td>
        <td class="text-right">${t.curr_amount}</td>
        <td class="text-right">${t.rate}</td>
    `;
    tbody.appendChild(row);
});
</script>

</body>
</html>